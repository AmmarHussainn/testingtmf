{"ast":null,"code":"import React,{useEffect,useState}from'react';import{NavLink}from'react-router-dom';import axios from'axios';import SvgIcons from'../../../components/svg';import BoldText from'../../../components/BoldText';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const FoodExportAssistant=()=>{var _currentConversation$2,_currentConversation$3,_currentConversation$4;const[user,setUser]=useState(null);const[question,setQuestion]=useState('');const[loader,setLoader]=useState(false);const[loader1,setLoader1]=useState(false);const[currentConversation,setCurrentConversation]=useState({conversation:[],conversationId:''});const[allConversations,setAllConversation]=useState([]);const fetchConversations=(Ids,userId)=>{setLoader1(true);const apiUrl='https://tmf-backend.onrender.com/conversation/messages';const requestData=Ids.map(id=>({userId:userId,conversationId:id}));console.log('requestData',requestData);const fetchPromises=requestData.map(data=>{return axios.post(apiUrl,{...data}).then(response=>response.data).catch(error=>{var _error$response;throw new Error(`Request failed: ${(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status} ${error.message}`);});});Promise.all(fetchPromises).then(responses=>{console.log('All responses:',responses);let allConversationsLocal=[];if(responses){for(const element of responses){let oneConversation=[];for(let i=0;i<(element===null||element===void 0?void 0:(_element$messages=element.messages)===null||_element$messages===void 0?void 0:_element$messages.length)-1;i+=2){var _element$messages;oneConversation.push({conversationId:element.conversationId,conversation:{question:element===null||element===void 0?void 0:element.messages[i].content,answer:element===null||element===void 0?void 0:element.messages[i+1].content}});}allConversationsLocal.push(oneConversation);}setAllConversation([...allConversationsLocal].reverse());setLoader1(false);}}).catch(error=>{console.log('Error:',error.message);setLoader1(false);});// setLoader1(false);\n};const onload=()=>{let userComing=JSON.parse(localStorage.getItem('user'));console.log('userComing',userComing);setUser(userComing);if((userComing===null||userComing===void 0?void 0:userComing.conversationIds.length)>0&&(allConversations===null||allConversations===void 0?void 0:allConversations.length)==0)fetchConversations(userComing===null||userComing===void 0?void 0:userComing.conversationIds,userComing.userId);};useEffect(()=>{onload();},[]);const submitQuestion=async()=>{var _currentConversation$;setLoader(true);let newConversation1=[...(currentConversation===null||currentConversation===void 0?void 0:currentConversation.conversation),{skeleton:true,conversation:{question:question,response:{}}}];console.log('TEST : ',{conversationId:currentConversation===null||currentConversation===void 0?void 0:currentConversation.conversationId,conversation:newConversation1});setCurrentConversation({conversationId:currentConversation===null||currentConversation===void 0?void 0:currentConversation.conversationId,conversation:newConversation1});console.log('DONE');let payload={query:question,userId:user.userId};setQuestion('');let path='https://tmf-backend.onrender.com/chat/start';let firstTime=true;if((currentConversation===null||currentConversation===void 0?void 0:(_currentConversation$=currentConversation.conversation)===null||_currentConversation$===void 0?void 0:_currentConversation$.length)>0){delete payload.userId;payload.conversationId=currentConversation.conversationId;firstTime=false;path='https://tmf-backend.onrender.com/chat/continue';}console.log('payload',payload);try{const response=await axios.post(path,payload);console.log('response Of API',response);setQuestion('');setLoader(false);if(response.status==200&&response.data){var _response$data2,_response$data3,_response$data4,_response$data5;if(firstTime){var _response$data;let newDataOfUser={userId:user.userId,conversationIds:[...user.conversationIds,response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.conversationId],token:user.token};localStorage.setItem('user',JSON.stringify(newDataOfUser));setUser(newDataOfUser);}let holder=[...currentConversation.conversation];// holder.pop();\nlet newConversation=[...holder,{conversationId:response===null||response===void 0?void 0:(_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.conversationId,conversation:{question:response===null||response===void 0?void 0:(_response$data3=response.data)===null||_response$data3===void 0?void 0:_response$data3.question,response:response===null||response===void 0?void 0:(_response$data4=response.data)===null||_response$data4===void 0?void 0:_response$data4.response}}];setCurrentConversation({conversationId:response===null||response===void 0?void 0:(_response$data5=response.data)===null||_response$data5===void 0?void 0:_response$data5.conversationId,conversation:newConversation});if(allConversations.length>0){let idFounded=false;for(let i=0;i<allConversations.length;i++){var _allConversations$i$,_response$data6;if(((_allConversations$i$=allConversations[i][0])===null||_allConversations$i$===void 0?void 0:_allConversations$i$.conversationId)==((response===null||response===void 0?void 0:(_response$data6=response.data)===null||_response$data6===void 0?void 0:_response$data6.conversationId)||(currentConversation===null||currentConversation===void 0?void 0:currentConversation.conversationId))){var _response$data7,_response$data8,_response$data9;idFounded=true;let newConv=[...allConversations];newConv[i].push({conversationId:response===null||response===void 0?void 0:(_response$data7=response.data)===null||_response$data7===void 0?void 0:_response$data7.conversationId,conversation:{question:response===null||response===void 0?void 0:(_response$data8=response.data)===null||_response$data8===void 0?void 0:_response$data8.question,response:response===null||response===void 0?void 0:(_response$data9=response.data)===null||_response$data9===void 0?void 0:_response$data9.response}});setAllConversation([...newConv]);}}if(!idFounded){var _response$data10,_response$data11,_response$data12;let newConv=[...allConversations];newConv.push([{conversationId:response===null||response===void 0?void 0:(_response$data10=response.data)===null||_response$data10===void 0?void 0:_response$data10.conversationId,conversation:{question:response===null||response===void 0?void 0:(_response$data11=response.data)===null||_response$data11===void 0?void 0:_response$data11.question,response:response===null||response===void 0?void 0:(_response$data12=response.data)===null||_response$data12===void 0?void 0:_response$data12.response}}]);setAllConversation([...newConv]);}}else{var _response$data13,_response$data14,_response$data15;let newConv=[[]];newConv[0][0]={conversationId:response===null||response===void 0?void 0:(_response$data13=response.data)===null||_response$data13===void 0?void 0:_response$data13.conversationId,conversation:{question:response===null||response===void 0?void 0:(_response$data14=response.data)===null||_response$data14===void 0?void 0:_response$data14.question,response:response===null||response===void 0?void 0:(_response$data15=response.data)===null||_response$data15===void 0?void 0:_response$data15.response}};setAllConversation([...newConv]);}}}catch(error){setLoader(false);console.log('ERROR OF API',error);}setLoader(false);};console.log('allConversations',allConversations);function handleKeyDown(event){if(event.key==='Enter'&&question.trim()){submitQuestion();}}function getDomainInfo(url){try{const{hostname}=new URL(url);const iconUrl=`https://www.google.com/s2/favicons?domain=${hostname}&sz=64`;return{domain:hostname.replace('www.',''),icon:iconUrl};}catch(error){console.error('Invalid URL',error);return null;}}function scrollToBottomSmooth(){const myDiv=document.getElementById('ScrollableDiv');myDiv.scrollTo({top:myDiv.scrollHeight,behavior:'smooth'});}const deleteConversation=async conversationId=>{let path='https://tmf-backend.onrender.com/conversation/delete';console.log({userId:user.userId,conversationId:conversationId});try{var _response$data16;const response=await axios.post(path,{userId:user.userId,conversationId:conversationId});if((response===null||response===void 0?void 0:response.status)==200&&(response===null||response===void 0?void 0:(_response$data16=response.data)===null||_response$data16===void 0?void 0:_response$data16.message)=='Conversation deleted successfully'){let updateAllConversations=allConversations;setAllConversation(updateAllConversations.filter(item=>item[0].conversationId!==conversationId));let newDataOfUser={userId:user.userId,conversationIds:[...user.conversationIds],token:user.token};newDataOfUser.conversationIds=newDataOfUser.conversationIds.filter(item=>item!==conversationId);localStorage.setItem('user',JSON.stringify(newDataOfUser));setUser(newDataOfUser);if(currentConversation.conversationId==conversationId)setCurrentConversation({conversation:[],conversationId:''});}console.log('DELETE responce',response);}catch(err){console.log('ERROR : ',err);}};useEffect(()=>{scrollToBottomSmooth();},[currentConversation]);const questions=[{questoin:`What's`},{questoin:`What's in`},{questoin:`What's in your`},{questoin:`What's in your mind?`},{questoin:`What's in your mind?...`}];return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full h-[100vh] flex items-center justify-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-[20%] shadow-[4px_-2px_46px_0px_rgba(0,_0,_0,_0.1)] h-[95%] rounded-xl flex flex-col justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3\",children:/*#__PURE__*/_jsx(NavLink,{to:\"home\",className:\"block w-full font-bold\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"font-poppins font-bold text-[38px]\",children:\"TMF\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-[100%] bg-[#E9EDF7] h-[1px] mt-5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-y-scroll overflow-x-hidden h-calc-100-minus-450\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-[100%] justify-center items-center gap-3 pt-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-[24px] h-[24px]\",children:/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'/images/AIlogo.png',alt:\"AI Logo\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold font-Poppins text-[16px]\",children:\"Food Export Assistant\"}),/*#__PURE__*/_jsx(\"div\",{onClick:()=>{setCurrentConversation({conversation:[],conversationId:''});},className:\"w-[34px] h-[34px] flex rounded-full justify-center items-center cursor-pointer hover:bg-slate-50\",children:/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'/images/addChat.png',alt:\"AI Logo\",className:\"w-[16px] h-[16px]\"})})]}),loader1?questions===null||questions===void 0?void 0:questions.map((item,idx)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-[85%] ml-auto mr-auto justify-start items-center gap-3 mt-3 mb-3 p-3 pl-4 pr-4 rounded-xl animate-pulse bg-slate-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-[18px] h-[16px] bg-slate-300 rounded\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-Poppins text-[14px] w-[80%] h-[16px] bg-slate-300 rounded truncate\"})]});}):allConversations.map((item,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:`flex w-[85%] ml-auto mr-auto justify-start items-center gap-3  mt-3 mb-3 p-3 pl-4 pr-4 rounded-xl cursor-pointer hover:bg-slate-50 ${(currentConversation===null||currentConversation===void 0?void 0:currentConversation.conversationId)==item[0].conversationId&&'bg-[#EAE9F7]'}`,onClick:e=>{e.preventDefault();setCurrentConversation({conversationId:item[0].conversationId,conversation:item});},children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-[18px] h-[16px] \",children:/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'/images/chatIcon.png',alt:\"Chat Icon\",className:\"w-[18px] h-[16px]\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"font-Poppins text-[14px] w-[75%] truncate text-[#00000066] shadow-inset-right-white\",children:item[0].conversation.question}),/*#__PURE__*/_jsx(\"div\",{onClick:e=>{e.preventDefault();deleteConversation(item[0].conversationId);},className:\"w-[20px] h-[20px]  \",children:/*#__PURE__*/_jsx(SvgIcons.Delete,{})})]},idx))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-[85%] p-5 ml-auto mr-auto rounded-2xl text-center gap-3 flex flex-col bg-custom-gradient\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold font-Poppins text-[18px] text-white\",children:\"Go unlimited with TMF\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium font-Poppins text-[14px] text-white\",children:\"Get your exports to another level and start doing more with TMF AI Tools!\"}),/*#__PURE__*/_jsx(\"button\",{className:\"text-white p-3 bg-[#ffffff24] rounded-full\",children:\"Get started with TMF\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-[85%] p-5 ml-auto mr-auto rounded-full text-center flex shadow-[4px_-2px_46px_0px_rgba(0,_0,_0,_0.1)] mt-4 mb-4 justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-[34px] h-[34px]\",children:/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'/images/mohsin.png',alt:\"User Avatar\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold font-Poppins text-[14px]\",children:\"Mohsin\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-[34px] h-[34px] cursor-pointer\",children:/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'/images/Logout.png',alt:\"Logout Icon\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-[77%] h-[95%] p-5 flex flex-col justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"font-bold font-Poppins text-[34px]\",children:\"Food Export Assistant\"})}),console.log('currentConversation?.conversation',currentConversation===null||currentConversation===void 0?void 0:currentConversation.conversation),/*#__PURE__*/_jsxs(\"div\",{className:`h-[85%] w-[77%] ml-auto mr-auto flex flex-col ${// user?.conversationIds?.length > 0 &&\n(currentConversation===null||currentConversation===void 0?void 0:(_currentConversation$2=currentConversation.conversation)===null||_currentConversation$2===void 0?void 0:_currentConversation$2.length)>0?'justify-between':'justify-center'}`,children:[/*#__PURE__*/_jsx(\"div\",{id:\"ScrollableDiv\",className:\"overflow-y-scroll overflow-x-hidden h-calc-100-minus-100\",children:// user?.conversationIds.length > 0 &&\n(currentConversation===null||currentConversation===void 0?void 0:(_currentConversation$3=currentConversation.conversation)===null||_currentConversation$3===void 0?void 0:_currentConversation$3.length)>0&&/*#__PURE__*/_jsx(_Fragment,{children:currentConversation===null||currentConversation===void 0?void 0:(_currentConversation$4=currentConversation.conversation)===null||_currentConversation$4===void 0?void 0:_currentConversation$4.map((item,index)=>{var _item$conversation,_item$conversation3,_item$conversation3$r,_item$conversation3$r2,_item$conversation4,_item$conversation4$r,_item$conversation4$r2,_item$conversation5,_item$conversation5$r,_item$conversation6,_item$conversation6$r,_item$conversation6$r2,_item$conversation6$r3,_item$conversation7;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-[100%] flex justify-start gap-4 items-center mt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-[40px] h-[40px] border border-[#E2E8F0] rounded-full flex justify-center items-center\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-[24px]\",src:process.env.PUBLIC_URL+'/images/personAvatar.png',alt:\"User Avatar\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 border border-[#E2E8F0] flex justify-between rounded-xl w-calc-100-minus-100\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-[16px] font-semibold\",children:(item===null||item===void 0?void 0:item.question)||(item===null||item===void 0?void 0:(_item$conversation=item.conversation)===null||_item$conversation===void 0?void 0:_item$conversation.question)}),/*#__PURE__*/_jsx(\"div\",{onClick:()=>{var _item$conversation2;setQuestion((item===null||item===void 0?void 0:item.question)||(item===null||item===void 0?void 0:(_item$conversation2=item.conversation)===null||_item$conversation2===void 0?void 0:_item$conversation2.question));document.getElementById('inputField').focus();scrollToBottomSmooth();},className:\"cursor-pointer\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-[24px]\",src:process.env.PUBLIC_URL+'/images/editAlone.png',alt:\"Edit Icon\"})})]})]}),item!==null&&item!==void 0&&item.skeleton?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{class:\"w-[100%] flex justify-start gap-4 mt-4 mb-9 items-start animate-pulse\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"w-[40px] h-[40px] bg-slate-300 rounded-full border border-[#E2E8F0]\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"p-3 shadow-[4px_-2px_46px_0px_rgba(0,_0,_0,_0.1)] rounded-xl w-calc-100-minus-100\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"h-[14px] w-[90%] bg-slate-300 rounded mb-2\"}),/*#__PURE__*/_jsx(\"div\",{class:\"h-[14px] w-[85%] bg-slate-300 rounded mb-2\"}),/*#__PURE__*/_jsx(\"div\",{class:\"h-[14px] w-[70%] bg-slate-300 rounded\"})]})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"w-[100%] flex justify-start gap-4 items-start mt-4 mb-9\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-[40px] h-[40px] border border-[#E2E8F0] rounded-full flex justify-center items-center\",children:/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'/images/aiAvatar.png',alt:\"AI Avatar\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 shadow-[4px_-2px_46px_0px_rgba(0,_0,_0,_0.1)] flex  flex-col justify-between rounded-xl w-calc-100-minus-100\",children:[(item===null||item===void 0?void 0:(_item$conversation3=item.conversation)===null||_item$conversation3===void 0?void 0:(_item$conversation3$r=_item$conversation3.response)===null||_item$conversation3$r===void 0?void 0:(_item$conversation3$r2=_item$conversation3$r.citations)===null||_item$conversation3$r2===void 0?void 0:_item$conversation3$r2.length)>0&&/*#__PURE__*/_jsx(\"div\",{className:\" w-[100%] flex gap-2  mb-6 flex-wrap \",children:item===null||item===void 0?void 0:(_item$conversation4=item.conversation)===null||_item$conversation4===void 0?void 0:(_item$conversation4$r=_item$conversation4.response)===null||_item$conversation4$r===void 0?void 0:(_item$conversation4$r2=_item$conversation4$r.citations)===null||_item$conversation4$r2===void 0?void 0:_item$conversation4$r2.map((items,idx)=>{return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{index:idx,onClick:()=>{window.open(items,'_blank');},className:\"w-[150px] h-[100px] font-bold border cursor-pointer overflow-hidden rounded-xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex justify-center p-2\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-[28px] h-[28px]\",src:getDomainInfo(items).icon})}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-[14px] w-full text-center p-2 break-words pt-0\",children:getDomainInfo(items).domain})]})});})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[14px] font-medium whitespace-pre-wrap overflow-auto\",children:/*#__PURE__*/_jsx(BoldText,{text:(item===null||item===void 0?void 0:(_item$conversation5=item.conversation)===null||_item$conversation5===void 0?void 0:(_item$conversation5$r=_item$conversation5.response)===null||_item$conversation5$r===void 0?void 0:_item$conversation5$r.choices)&&(item===null||item===void 0?void 0:(_item$conversation6=item.conversation)===null||_item$conversation6===void 0?void 0:(_item$conversation6$r=_item$conversation6.response)===null||_item$conversation6$r===void 0?void 0:(_item$conversation6$r2=_item$conversation6$r.choices[0])===null||_item$conversation6$r2===void 0?void 0:(_item$conversation6$r3=_item$conversation6$r2.message)===null||_item$conversation6$r3===void 0?void 0:_item$conversation6$r3.content)||(item===null||item===void 0?void 0:(_item$conversation7=item.conversation)===null||_item$conversation7===void 0?void 0:_item$conversation7.answer)})})]})]})]});})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"h-[100px]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between w-calc-100-minus-100 ml-[50px] mt-5\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter your query here...\",value:question,id:\"inputField\",onInput:e=>{setQuestion(e.target.value);},onKeyDown:handleKeyDown,className:\"w-[80%] border border-[#E9EDF7] pl-6 pt-4 pb-4 pr-6 text-[14px] rounded-full outline-none\"}),/*#__PURE__*/_jsx(\"div\",{onClick:()=>{submitQuestion();},className:`w-[18%] bg-custom-gradient text-white flex justify-center items-center h-[54px] rounded-full text-[14px] cursor-pointer ${(question==''||loader)&&'pointer-events-none'}`,children:loader?/*#__PURE__*/_jsxs(\"div\",{class:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"w-2 h-2 bg-white rounded-full animate-wave delay-0\"}),/*#__PURE__*/_jsx(\"div\",{class:\"w-2 h-2 bg-white rounded-full animate-wave delay-150\"}),/*#__PURE__*/_jsx(\"div\",{class:\"w-2 h-2 bg-white rounded-full animate-wave delay-300\"})]}):'Submit'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-[#718096] text-[12px] ml-auto mr-auto w-fit mt-3\",children:\"Free Research Preview. AI may produce inaccurate information about people, places, or facts.\"})]})]})]})]});};","map":{"version":3,"names":["React","useEffect","useState","NavLink","axios","SvgIcons","BoldText","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FoodExportAssistant","_currentConversation$2","_currentConversation$3","_currentConversation$4","user","setUser","question","setQuestion","loader","setLoader","loader1","setLoader1","currentConversation","setCurrentConversation","conversation","conversationId","allConversations","setAllConversation","fetchConversations","Ids","userId","apiUrl","requestData","map","id","console","log","fetchPromises","data","post","then","response","catch","error","_error$response","Error","status","message","Promise","all","responses","allConversationsLocal","element","oneConversation","i","_element$messages","messages","length","push","content","answer","reverse","onload","userComing","JSON","parse","localStorage","getItem","conversationIds","submitQuestion","_currentConversation$","newConversation1","skeleton","payload","query","path","firstTime","_response$data2","_response$data3","_response$data4","_response$data5","_response$data","newDataOfUser","token","setItem","stringify","holder","newConversation","idFounded","_allConversations$i$","_response$data6","_response$data7","_response$data8","_response$data9","newConv","_response$data10","_response$data11","_response$data12","_response$data13","_response$data14","_response$data15","handleKeyDown","event","key","trim","getDomainInfo","url","hostname","URL","iconUrl","domain","replace","icon","scrollToBottomSmooth","myDiv","document","getElementById","scrollTo","top","scrollHeight","behavior","deleteConversation","_response$data16","updateAllConversations","filter","item","err","questions","questoin","className","children","to","src","process","env","PUBLIC_URL","alt","onClick","idx","e","preventDefault","Delete","index","_item$conversation","_item$conversation3","_item$conversation3$r","_item$conversation3$r2","_item$conversation4","_item$conversation4$r","_item$conversation4$r2","_item$conversation5","_item$conversation5$r","_item$conversation6","_item$conversation6$r","_item$conversation6$r2","_item$conversation6$r3","_item$conversation7","_item$conversation2","focus","class","citations","items","window","open","text","choices","placeholder","value","onInput","target","onKeyDown"],"sources":["/Users/ammarhussain/Desktop/testingtmf/src/pages/Dashboard/Products/FoodExportAssistant.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport axios from 'axios';\nimport SvgIcons from '../../../components/svg';\nimport BoldText from '../../../components/BoldText';\n\nexport const FoodExportAssistant = () => {\n  const [user, setUser] = useState(null);\n  const [question, setQuestion] = useState('');\n  const [loader, setLoader] = useState(false);\n  const [loader1, setLoader1] = useState(false);\n  const [currentConversation, setCurrentConversation] = useState({\n    conversation: [],\n    conversationId: '',\n  });\n  const [allConversations, setAllConversation] = useState([]);\n\n  const fetchConversations = (Ids, userId) => {\n    setLoader1(true);\n    const apiUrl = 'https://tmf-backend.onrender.com/conversation/messages';\n    const requestData = Ids.map((id) => ({\n      userId: userId,\n      conversationId: id,\n    }));\n\n    console.log('requestData', requestData);\n\n    const fetchPromises = requestData.map((data) => {\n      return axios\n        .post(apiUrl, { ...data })\n        .then((response) => response.data)\n        .catch((error) => {\n          throw new Error(\n            `Request failed: ${error.response?.status} ${error.message}`\n          );\n        });\n    });\n\n    Promise.all(fetchPromises)\n      .then((responses) => {\n        console.log('All responses:', responses);\n        let allConversationsLocal = [];\n        if (responses) {\n          for (const element of responses) {\n            let oneConversation = [];\n            for (let i = 0; i < element?.messages?.length - 1; i += 2) {\n              oneConversation.push({\n                conversationId: element.conversationId,\n                conversation: {\n                  question: element?.messages[i].content,\n                  answer: element?.messages[i + 1].content,\n                },\n              });\n            }\n            allConversationsLocal.push(oneConversation);\n          }\n\n          setAllConversation([...allConversationsLocal].reverse());\n          setLoader1(false);\n        }\n      })\n      .catch((error) => {\n        console.log('Error:', error.message);\n        setLoader1(false);\n      });\n    // setLoader1(false);\n  };\n\n  const onload = () => {\n    let userComing = JSON.parse(localStorage.getItem('user'));\n    console.log('userComing', userComing);\n    setUser(userComing);\n\n    if (userComing?.conversationIds.length > 0 && allConversations?.length == 0)\n      fetchConversations(userComing?.conversationIds, userComing.userId);\n  };\n\n  useEffect(() => {\n    onload();\n  }, []);\n\n  const submitQuestion = async () => {\n    setLoader(true);\n\n    let newConversation1 = [\n      ...currentConversation?.conversation,\n      {\n        skeleton: true,\n        conversation: {\n          question: question,\n          response: {},\n        },\n      },\n    ];\n    console.log('TEST : ', {\n      conversationId: currentConversation?.conversationId,\n      conversation: newConversation1,\n    });\n    setCurrentConversation({\n      conversationId: currentConversation?.conversationId,\n      conversation: newConversation1,\n    });\n    console.log('DONE');\n\n    let payload = {\n      query: question,\n      userId: user.userId,\n    };\n\n    setQuestion('');\n\n    let path = 'https://tmf-backend.onrender.com/chat/start';\n    let firstTime = true;\n    if (currentConversation?.conversation?.length > 0) {\n      delete payload.userId;\n      payload.conversationId = currentConversation.conversationId;\n      firstTime = false;\n      path = 'https://tmf-backend.onrender.com/chat/continue';\n    }\n    console.log('payload', payload);\n    try {\n      const response = await axios.post(path, payload);\n      console.log('response Of API', response);\n      setQuestion('');\n      setLoader(false);\n      if (response.status == 200 && response.data) {\n        if (firstTime) {\n          let newDataOfUser = {\n            userId: user.userId,\n            conversationIds: [\n              ...user.conversationIds,\n              response?.data?.conversationId,\n            ],\n            token: user.token,\n          };\n          localStorage.setItem('user', JSON.stringify(newDataOfUser));\n          setUser(newDataOfUser);\n        }\n        let holder = [...currentConversation.conversation];\n        // holder.pop();\n\n        let newConversation = [\n          ...holder,\n          {\n            conversationId: response?.data?.conversationId,\n            conversation: {\n              question: response?.data?.question,\n              response: response?.data?.response,\n            },\n          },\n        ];\n        setCurrentConversation({\n          conversationId: response?.data?.conversationId,\n          conversation: newConversation,\n        });\n\n        if (allConversations.length > 0) {\n          let idFounded = false;\n          for (let i = 0; i < allConversations.length; i++) {\n            if (\n              allConversations[i][0]?.conversationId ==\n              (response?.data?.conversationId || currentConversation?.conversationId)\n            ) {\n              idFounded = true;\n              let newConv = [...allConversations];\n              newConv[i].push({\n                conversationId: response?.data?.conversationId,\n                conversation: {\n                  question: response?.data?.question,\n                  response: response?.data?.response,\n                },\n              });\n              setAllConversation([...newConv]);\n            }\n          }\n          if(!idFounded){\n              let newConv = [...allConversations];\n              newConv.push([{\n                conversationId: response?.data?.conversationId,\n                conversation: {\n                  question: response?.data?.question,\n                  response: response?.data?.response,\n                },\n              }]);\n              setAllConversation([...newConv]);\n            \n          }\n        }else{\n          let newConv = [[]];\n          newConv[0][0] = {\n            conversationId: response?.data?.conversationId,\n            conversation: {\n              question: response?.data?.question,\n              response: response?.data?.response,\n            },\n          };\n          setAllConversation([...newConv]);\n        }\n      }\n    } catch (error) {\n      setLoader(false);\n      console.log('ERROR OF API', error);\n    }\n    setLoader(false);\n  };\n\n  console.log('allConversations', allConversations);\n\n  function handleKeyDown(event) {\n    if (event.key === 'Enter' && question.trim()) {\n      submitQuestion();\n    }\n  }\n  function getDomainInfo(url) {\n    try {\n      const { hostname } = new URL(url);\n      const iconUrl = `https://www.google.com/s2/favicons?domain=${hostname}&sz=64`;\n\n      return {\n        domain: hostname.replace('www.', ''),\n        icon: iconUrl,\n      };\n    } catch (error) {\n      console.error('Invalid URL', error);\n      return null;\n    }\n  }\n  function scrollToBottomSmooth() {\n    const myDiv = document.getElementById('ScrollableDiv');\n    myDiv.scrollTo({\n      top: myDiv.scrollHeight,\n      behavior: 'smooth',\n    });\n  }\n\n  const deleteConversation = async (conversationId) => {\n    let path = 'https://tmf-backend.onrender.com/conversation/delete';\n    console.log({\n      userId: user.userId,\n      conversationId: conversationId,\n    });\n    try {\n      const response = await axios.post(path, {\n        userId: user.userId,\n        conversationId: conversationId,\n      });\n\n      if (\n        response?.status == 200 &&\n        response?.data?.message == 'Conversation deleted successfully'\n      ) {\n        let updateAllConversations = allConversations;\n\n        setAllConversation(\n          updateAllConversations.filter(\n            (item) => item[0].conversationId !== conversationId\n          )\n        );\n\n        let newDataOfUser = {\n          userId: user.userId,\n          conversationIds: [...user.conversationIds],\n          token: user.token,\n        };\n        newDataOfUser.conversationIds = newDataOfUser.conversationIds.filter(\n          (item) => item !== conversationId\n        );\n        localStorage.setItem('user', JSON.stringify(newDataOfUser));\n        setUser(newDataOfUser);\n\n        if (currentConversation.conversationId == conversationId)\n          setCurrentConversation({\n            conversation: [],\n            conversationId: '',\n          });\n      }\n\n      console.log('DELETE responce', response);\n    } catch (err) {\n      console.log('ERROR : ', err);\n    }\n  };\n\n  useEffect(() => {\n    scrollToBottomSmooth();\n  }, [currentConversation]);\n\n  const questions = [\n    { questoin: `What's` },\n    { questoin: `What's in` },\n    { questoin: `What's in your` },\n    { questoin: `What's in your mind?` },\n    { questoin: `What's in your mind?...` },\n  ];\n\n  return (\n    <div className='w-full h-[100vh] flex items-center justify-center'>\n      <div className='w-[20%] shadow-[4px_-2px_46px_0px_rgba(0,_0,_0,_0.1)] h-[95%] rounded-xl flex flex-col justify-between'>\n        <div>\n          <div className='p-3'>\n            <NavLink to='home' className='block w-full font-bold'>\n              <h1 className='font-poppins font-bold text-[38px]'>TMF</h1>\n            </NavLink>\n          </div>\n          <div className='w-[100%] bg-[#E9EDF7] h-[1px] mt-5'></div>\n          <div className='overflow-y-scroll overflow-x-hidden h-calc-100-minus-450'>\n            <div className='flex w-[100%] justify-center items-center gap-3 pt-8'>\n              <div className='w-[24px] h-[24px]'>\n                <img\n                  src={process.env.PUBLIC_URL + '/images/AIlogo.png'}\n                  alt='AI Logo'\n                />\n              </div>\n              <h2 className='font-bold font-Poppins text-[16px]'>\n                Food Export Assistant\n              </h2>\n              <div\n                onClick={() => {\n                  setCurrentConversation({\n                    conversation: [],\n                    conversationId: '',\n                  });\n                }}\n                className='w-[34px] h-[34px] flex rounded-full justify-center items-center cursor-pointer hover:bg-slate-50'\n              >\n                <img\n                  src={process.env.PUBLIC_URL + '/images/addChat.png'}\n                  alt='AI Logo'\n                  className='w-[16px] h-[16px]'\n                />\n              </div>\n            </div>\n            {loader1\n              ? questions?.map((item, idx) => {\n                  return (\n                    <div className='flex w-[85%] ml-auto mr-auto justify-start items-center gap-3 mt-3 mb-3 p-3 pl-4 pr-4 rounded-xl animate-pulse bg-slate-100'>\n                      <div className='w-[18px] h-[16px] bg-slate-300 rounded'></div>\n                      <div className='font-Poppins text-[14px] w-[80%] h-[16px] bg-slate-300 rounded truncate'></div>\n                    </div>\n                  );\n                })\n              : allConversations.map((item, idx) => (\n                  <div\n                    key={idx}\n                    className={`flex w-[85%] ml-auto mr-auto justify-start items-center gap-3  mt-3 mb-3 p-3 pl-4 pr-4 rounded-xl cursor-pointer hover:bg-slate-50 ${\n                      currentConversation?.conversationId ==\n                        item[0].conversationId && 'bg-[#EAE9F7]'\n                    }`}\n                    onClick={(e) => {\n                      e.preventDefault();\n                      setCurrentConversation({\n                        conversationId: item[0].conversationId,\n                        conversation: item,\n                      });\n                    }}\n                  >\n                    <div className='w-[18px] h-[16px] '>\n                      <img\n                        src={process.env.PUBLIC_URL + '/images/chatIcon.png'}\n                        alt='Chat Icon'\n                        className='w-[18px] h-[16px]'\n                      />\n                    </div>\n                    <div className='font-Poppins text-[14px] w-[75%] truncate text-[#00000066] shadow-inset-right-white'>\n                      {item[0].conversation.question}\n                    </div>\n                    <div\n                      onClick={(e) => {\n                        e.preventDefault();\n                        deleteConversation(item[0].conversationId);\n                      }}\n                      className='w-[20px] h-[20px]  '\n                    >\n                      <SvgIcons.Delete />\n                    </div>\n                  </div>\n                ))}\n          </div>\n        </div>\n\n        <div>\n          <div className='w-[85%] p-5 ml-auto mr-auto rounded-2xl text-center gap-3 flex flex-col bg-custom-gradient'>\n            <h3 className='font-bold font-Poppins text-[18px] text-white'>\n              Go unlimited with TMF\n            </h3>\n            <p className='font-medium font-Poppins text-[14px] text-white'>\n              Get your exports to another level and start doing more with TMF AI\n              Tools!\n            </p>\n            <button className='text-white p-3 bg-[#ffffff24] rounded-full'>\n              Get started with TMF\n            </button>\n          </div>\n          <div className='w-[85%] p-5 ml-auto mr-auto rounded-full text-center flex shadow-[4px_-2px_46px_0px_rgba(0,_0,_0,_0.1)] mt-4 mb-4 justify-between'>\n            <div className='flex items-center gap-3'>\n              <div className='w-[34px] h-[34px]'>\n                <img\n                  src={process.env.PUBLIC_URL + '/images/mohsin.png'}\n                  alt='User Avatar'\n                />\n              </div>\n              <h3 className='font-bold font-Poppins text-[14px]'>Mohsin</h3>\n            </div>\n            <div className='w-[34px] h-[34px] cursor-pointer'>\n              <img\n                src={process.env.PUBLIC_URL + '/images/Logout.png'}\n                alt='Logout Icon'\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className='w-[77%] h-[95%] p-5 flex flex-col justify-between'>\n        <div className='flex'>\n          <h1 className='font-bold font-Poppins text-[34px]'>\n            Food Export Assistant\n          </h1>\n        </div>\n        {console.log(\n          'currentConversation?.conversation',\n          currentConversation?.conversation\n        )}\n\n        <div\n          className={`h-[85%] w-[77%] ml-auto mr-auto flex flex-col ${\n            // user?.conversationIds?.length > 0 &&\n            currentConversation?.conversation?.length > 0\n              ? 'justify-between'\n              : 'justify-center'\n          }`}\n        >\n          <div\n            id='ScrollableDiv'\n            className='overflow-y-scroll overflow-x-hidden h-calc-100-minus-100'\n          >\n            {\n              // user?.conversationIds.length > 0 &&\n              currentConversation?.conversation?.length > 0 && (\n                <>\n                  {currentConversation?.conversation?.map((item, index) => {\n                    return (\n                      <>\n                        <div className='w-[100%] flex justify-start gap-4 items-center mt-5'>\n                          <div className='w-[40px] h-[40px] border border-[#E2E8F0] rounded-full flex justify-center items-center'>\n                            <img\n                              className='w-[24px]'\n                              src={\n                                process.env.PUBLIC_URL +\n                                '/images/personAvatar.png'\n                              }\n                              alt='User Avatar'\n                            />\n                          </div>\n                          <div className='p-3 border border-[#E2E8F0] flex justify-between rounded-xl w-calc-100-minus-100'>\n                            <p className='text-[16px] font-semibold'>\n                              {item?.question || item?.conversation?.question}\n                            </p>\n                            <div\n                              onClick={() => {\n                                setQuestion(\n                                  item?.question || item?.conversation?.question\n                                );\n                                document.getElementById('inputField').focus();\n                                scrollToBottomSmooth();\n                              }}\n                              className='cursor-pointer'\n                            >\n                              <img\n                                className='w-[24px]'\n                                src={\n                                  process.env.PUBLIC_URL +\n                                  '/images/editAlone.png'\n                                }\n                                alt='Edit Icon'\n                              />\n                            </div>\n                          </div>\n                        </div>\n                        {item?.skeleton ? (\n                          <>\n                            <div class='w-[100%] flex justify-start gap-4 mt-4 mb-9 items-start animate-pulse'>\n                              <div class='w-[40px] h-[40px] bg-slate-300 rounded-full border border-[#E2E8F0]'></div>\n                              <div class='p-3 shadow-[4px_-2px_46px_0px_rgba(0,_0,_0,_0.1)] rounded-xl w-calc-100-minus-100'>\n                                <div class='h-[14px] w-[90%] bg-slate-300 rounded mb-2'></div>\n                                <div class='h-[14px] w-[85%] bg-slate-300 rounded mb-2'></div>\n                                <div class='h-[14px] w-[70%] bg-slate-300 rounded'></div>\n                              </div>\n                            </div>\n                          </>\n                        ) : (\n                          <div className='w-[100%] flex justify-start gap-4 items-start mt-4 mb-9'>\n                            <div className='w-[40px] h-[40px] border border-[#E2E8F0] rounded-full flex justify-center items-center'>\n                              <img\n                                src={\n                                  process.env.PUBLIC_URL +\n                                  '/images/aiAvatar.png'\n                                }\n                                alt='AI Avatar'\n                              />\n                            </div>\n\n                            <div className='p-3 shadow-[4px_-2px_46px_0px_rgba(0,_0,_0,_0.1)] flex  flex-col justify-between rounded-xl w-calc-100-minus-100'>\n                              {item?.conversation?.response?.citations?.length >\n                                0 && (\n                                <div className=' w-[100%] flex gap-2  mb-6 flex-wrap '>\n                                  {item?.conversation?.response?.citations?.map(\n                                    (items, idx) => {\n                                      return (\n                                        <>\n                                          <div\n                                            index={idx}\n                                            onClick={() => {\n                                              window.open(items, '_blank');\n                                            }}\n                                            className='w-[150px] h-[100px] font-bold border cursor-pointer overflow-hidden rounded-xl'\n                                          >\n                                            <div className='w-full flex justify-center p-2'>\n                                              <img\n                                                className='w-[28px] h-[28px]'\n                                                src={getDomainInfo(items).icon}\n                                              />\n                                            </div>\n                                            <h3 className='font-bold text-[14px] w-full text-center p-2 break-words pt-0'>\n                                              {getDomainInfo(items).domain}\n                                            </h3>\n                                          </div>\n                                        </>\n                                      );\n                                    }\n                                  )}\n                                </div>\n                              )}\n                              <p className='text-[14px] font-medium whitespace-pre-wrap overflow-auto'>\n                                { <BoldText text={(item?.conversation?.response?.choices &&\n                                  item?.conversation?.response?.choices[0]\n                                    ?.message?.content) ||\n                                  item?.conversation?.answer} /> \n                                  }\n\n                              </p>\n                            </div>\n                          </div>\n                        )}\n                        {/* <div className='flex justify-center items-center gap-3 border border-[#E2E8F0] w-fit ml-auto mr-auto mt-4 cursor-pointer p-3 rounded-full'>\n                  <img\n                    className='w-[14px] h-[14px]'\n                    src={process.env.PUBLIC_URL + '/images/Vector1.png'}\n                    alt='Regenerate Icon'\n                  />\n                  <p className='text-[14px] font-semibold'>\n                    Regenerate response\n                  </p>\n                </div> */}\n                      </>\n                    );\n                  })}\n                </>\n              )\n            }\n          </div>\n\n          <div className='h-[100px]'>\n            <div className='flex justify-between w-calc-100-minus-100 ml-[50px] mt-5'>\n              <input\n                placeholder='Enter your query here...'\n                value={question}\n                id='inputField'\n                onInput={(e) => {\n                  setQuestion(e.target.value);\n                }}\n                onKeyDown={handleKeyDown}\n                className='w-[80%] border border-[#E9EDF7] pl-6 pt-4 pb-4 pr-6 text-[14px] rounded-full outline-none'\n              />\n              <div\n                onClick={() => {\n                  submitQuestion();\n                }}\n                className={`w-[18%] bg-custom-gradient text-white flex justify-center items-center h-[54px] rounded-full text-[14px] cursor-pointer ${\n                  (question == '' || loader) && 'pointer-events-none'\n                }`}\n              >\n                {loader ? (\n                  <div class='flex space-x-2'>\n                    <div class='w-2 h-2 bg-white rounded-full animate-wave delay-0'></div>\n                    <div class='w-2 h-2 bg-white rounded-full animate-wave delay-150'></div>\n                    <div class='w-2 h-2 bg-white rounded-full animate-wave delay-300'></div>\n                  </div>\n                ) : (\n                  'Submit'\n                )}\n              </div>\n            </div>\n            <div className='text-[#718096] text-[12px] ml-auto mr-auto w-fit mt-3'>\n              Free Research Preview. AI may produce inaccurate information about\n              people, places, or facts.\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}